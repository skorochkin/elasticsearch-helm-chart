# Elasticsearch Helm Chart

![Version: 0.1.0](https://img.shields.io/badge/Version-0.1.0-informational?style=flat-square) ![AppVersion: 7.15.0](https://img.shields.io/badge/AppVersion-7.15.0-informational?style=flat-square)

## Description
This repostiory conatins Helm Chart for stateful Elasticsearch deployment.

The deployment modeil consists of the following objects:
1. StatefulSet - set of pods used to manage applicaiton Pods and Volumes.
2. Service - services to expose Elasticsearch application running on Pods.
3. PodDisruptionBudget - to set how many instances can be down at the same time.
4. Ingress - ingress resource to expose service outside.

## Requirememnts
- Kubernetes 1.22+
- Helm 3+

## Usage
To use this chat, download/clone it locally, then using the Terminal, go to the cloned folder and run the following command:
```
# Create Kubernetes namespace
kubectl create ns ${NAMESPACE}

# Install Elasticsearch
helm upgrade  --install -n ${NAMESPACE} elasticsearch .
```
where, ${NAMESPACE} is namespace name (eg. `elasticsearch`)

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| antiAffinity | string | `"soft"` | AntiAffinity type (hard|soft) |
| antiAffinityTopologyKey | string | `"kubernetes.io/hostname"` | AntiAffinity topology key |
| clusterHealthCheckParams | string | `"wait_for_status=green&timeout=1s"` | Elasticsearch custom healthcheck parameter |
| clusterName | string | `"es"` | Name of elasticsearch cluster |
| httpPort | int | `9200` | HTTP port number |
| image | string | `"docker.elastic.co/elasticsearch/elasticsearch"` | Path to docker image |
| imagePullPolicy | string | `"IfNotPresent"` | Image pull policy |
| imageTag | string | `"7.15.0"` | Image tag |
| ingressHost | string | `"example.local"` | Ingress host |
| ingressPath | string | `"/"` | Ingress path |
| maxUnavailable | int | `1` | PodDisruptionBudget maxUnavailable number |
| networkHost | string | `"0.0.0.0"` | Elasticsearch netowrk.host parameter (on which interfaces it should listen) |
| podManagementPolicy | string | `"Parallel"` | Pod Management Policy. Setting in "Parallel: will speed up the deployment. |
| protocol | string | `"http"` | Protocol used for Health checker |
| replicas | int | `3` | How many replicas to start |
| sysctlVmMaxMapCount | int | `262144` | Value for "sysctl -w vm.max_map_count=.." |
| transportPort | int | `9300` | Transport port number |
| updateStrategy | string | `"RollingUpdate"` | RollingUpdate type |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.5.0](https://github.com/norwoodj/helm-docs/releases/v1.5.0)
